=== ЗОМБИ-ПРОЦЕССЫ - ОСНОВНОЕ ===

ЧТО ТАКОЕ ЗОМБИ-ПРОЦЕСС?
- Процесс, который завершился, но еще есть в таблице процессов
- Не использует CPU и память
- Состояние 'Z' в ps aux

КАК ПОЯВЛЯЮТСЯ?
1. Дочерний процесс завершается (exit)
2. Родитель НЕ вызывает wait()/waitpid()
3. Информация сохраняется для родителя

ПРИМЕР СОЗДАНИЯ ЗОМБИ:
pid_t pid = fork();
if (pid == 0) {
    exit(0);  // Дочерний завершился
} else {
    sleep(10); // Родитель не вызывает wait() - ЗОМБИ!
}

КАК ИСЧЕЗАЮТ?
1. Родитель вызывает wait() - ЛУЧШИЙ СПОСОБ
   wait(&status);

2. Родитель завершается - зомби переходят к init

3. Обработчик SIGCHLD:
   signal(SIGCHLD, cleanup);
   void cleanup(int sig) {
       while (waitpid(-1, NULL, WNOHANG) > 0);
   }

4. Игнорирование SIGCHLD:
   signal(SIGCHLD, SIG_IGN);

ЧЕМ ОПАСНЫ?
- Занимают записи в таблице процессов
- Могут исчерпать лимит процессов в системе
- cat /proc/sys/kernel/pid_max - проверить лимит

КАК УБРАТЬ СУЩЕСТВУЮЩИЕ ЗОМБИ?
1. Найти родителя: 
   ps -eo pid,ppid,state | grep Z

2. Убить родителя:
   kill -9 PARENT_PID

3. Перезагрузить систему (крайний случай)

КАК ПРЕДОТВРАТИТЬ?
- Всегда вызывать wait() для дочерних процессов
- Использовать обработчик SIGCHLD
- Для демонов - двойной fork

КОМАНДЫ ДЛЯ ПРОВЕРКИ:
ps aux | grep defunct
ps -eo pid,ppid,state,comm | grep Z
echo "Зомби: $(ps aux | awk '$8=="Z" {print $2}' | wc -l)"